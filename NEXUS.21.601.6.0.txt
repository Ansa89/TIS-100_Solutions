@0
MOV RIGHT, DOWN

@1
MOV UP, ACC
MOV ACC, RIGHT
P: JRO RIGHT
MOV ACC, LEFT
MOV RIGHT, DOWN
JMP P
MOV RIGHT, DOWN
MOV 1, LEFT

@2
MOV LEFT, RIGHT
MOV UP, ACC
S: SUB 1
JEZ Z
MOV 1, LEFT
MOV RIGHT, LEFT
MOV 1, DOWN
JMP S
Z: MOV 4, LEFT
MOV RIGHT, LEFT
MOV 3, DOWN

@3
MOV ANY, LEFT

@4
S: MOV UP, ACC
SWP
MOV LEFT, ACC
MOV ACC, DOWN
JEZ S
SWP
MOV ACC, DOWN
SWP
SUB 1
JRO -5

@5
MOV UP, DOWN

@6
MOV UP, ACC
JEZ Z
SWP
ADD UP
SWP
SUB 1
JRO -5
Z: SWP
MOV ACC, RIGHT

@7
R: JRO UP
MOV LEFT, RIGHT
JMP R
MOV LEFT, DOWN

@8
MOV LEFT, UP
