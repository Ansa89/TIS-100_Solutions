@0
N: MOV UP, ACC
JEZ Z
MOV ACC, LEFT
JMP N
Z: MOV 0, DOWN
MOV DOWN, ACC
JEZ E
R: MOV RIGHT, LEFT
SUB 1
JEZ ZZ
JMP R
ZZ: MOV 1, RIGHT
JMP Z
E: MOV 0, RIGHT

@1
MOV 0, UP
MOV RIGHT, NIL
B: MOV UP, ACC
JEZ Z
MOV 1, DOWN
MOV ACC, DOWN
JRO DOWN
MOV ACC, RIGHT
JMP B
Z: MOV 10, DOWN
MOV 0, RIGHT

@2
MOV UP, NIL
MOV 0, LEFT
B: MOV LEFT, ACC
JEZ Z
MOV ACC, RIGHT
SWP
ADD 1
SWP
JMP B
Z: SWP
SUB 1
MOV ACC, UP
MOV 0, ACC
MOV 0, RIGHT
SAV

@3
S: MOV LEFT, DOWN
NB: MOV LEFT, ACC
JEZ Z
MOV ACC, UP
JMP NB
Z: MOV 10, ACC
Q: SUB 1
JNZ Q
MOV UP, ACC
JEZ ZZ
MOV 1, DOWN
JMP S
ZZ: MOV 3, DOWN

@4
MOV UP, NIL
MOV UP, ACC
MOV 1, UP
S: SAV
JRO UP
SUB UP
JNZ NZ
MOV 1, RIGHT
MOV -4, UP
SWP
JMP S
NZ: MOV 1, UP
SWP
JMP S
MOV 3, RIGHT

@5
S: SAV
NEG
B: JRO LEFT
ADD 1
JMP B
JEZ Z
JLZ LZ
GZ: MOV 2, RIGHT
JMP E
LZ: MOV 4, RIGHT
Z: MOV 1, RIGHT
SWP
E: JRO RIGHT
MOV RIGHT, DOWN
MOV 0, ACC

@6
MOV UP, ACC
SAV
JMP P
S: MOV UP, ACC
JRO LEFT
MOV 0, ACC
SAV
JMP N
P: MOV LEFT, NIL
N: JRO UP
MOV -12, LEFT
JMP S
MOV 1, LEFT
SWP
MOV ACC, LEFT
